
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Advanced iOS animations - Marcin Pędzimąż</title>
	<meta name="author" content="Marcin Pędzimąż">

	
	<meta name="description" content="This post will be probably very long and will cover a lot about making your app as juicy as possible. Best iOS apps have heavily animated UI and &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Marcin Pędzimąż" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script async="true" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
</head>


<body>
	<header id="header" class="inner"><h1><a href="/">Marcin Pędzimąż</a></h1>
<nav id="main-nav"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul class="main">
	<li><a href="/">Blog</a></li>
	<li><a href="/blog/archives">Archives</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="https://www.google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:noxytrux.github.io">
			</form>
		</div>
	</div>
</nav>
<nav id="sub-nav" class="alignright">
	<div class="social">
		
		
		
		<a class="twitter" href="http://twitter.com/noxytrux" title="Twitter">Twitter</a>
		
		
    
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
    
	</div>
	<form class="search" action="https://www.google.com/search" method="get">
		<input class="alignright" type="text" name="q" results="0">
		<input type="hidden" name="q" value="site:noxytrux.github.io">
	</form>
</nav>

</header>
	
		
	
	<div id="content" class="inner"><article class="post">
	<h2 class="title">Advanced iOS Animations</h2>
	<div class="entry-content"><p>This post will be probably very long and will cover a lot about making your app as juicy as possible. Best iOS apps have heavily animated UI and guide users by themselves so today we will talk about how to take advantages of all new xCode features, and how design app or how to use eyes in terms of imagining your app being animated.</p>

<!--more-->


<p>There are some very basic skills that you need to become iOS dev, good knowing of API is a 80% of your success to become good iOS developer. Old wolfs who were starting from 3.2 know what kind of hell we actually have to pass to get today&rsquo;s ARC, IB improvements and much more. But there is something that can make you become one of those ninjas who put his &ldquo;wow&rdquo; effect to every app they touch. Today I will show you how to convert simple record app to something breathtaking. It will be first part of record app tutorial connected with Core Audio (I will talk about CA next time.) but today we focus only on design, interface builder and last but not least animations of user interface.</p>

<p>There are some things that you actually need to learn if you want to survive in iOS world and most of all become a SWAT team member of iOS developers, those things are:</p>

<ul>
<li>Learn GIMP or Photoshop</li>
<li>If you don&rsquo;t want to learn photoshop at least you should know how to import colors, fonts etc.</li>
<li>Buy notepad and some pencils.</li>
<li>Spend a lot time experimenting with UIAnimations and Gesture Recognizers</li>
<li>Read documentation! (even those old 4.X API)</li>
<li>Attend to Hackatons.</li>
<li>Fail a lot :) without that you cannot learn</li>
<li>Take criticism (this one is probably most important)</li>
<li>Learn OpenGL</li>
<li>And much more ;)</li>
</ul>


<p>More time you spend on all of this less time you will need to build an iOS app. Look at the video below i build a project for this post in one day and put even to much animations but i want to show you how to make your app feel alive, and tell user he can interact with it. It gives this feeling of &ldquo;doing something&rdquo; all the time.</p>

<div class="embed-video-container"><iframe src="http://www.youtube.com/embed/y9o2fGH6oYo" allowfullscreen></iframe></div>


<p>So how i achieve this ? Most of all hard work but there are some key things that will allow you to do the same ;)</p>

<p><b>GIMP</b></p>

<p>Knowing at least one graphic editor will let you save a lot of time and work. Even if you are not a master chief graphic designer with good hand. You can still at least modify or draw your own simple assets. And most important if your UI guy is on vacation and you just need to resize asset, or put some alpha on it you can do it by yourself, common it&rsquo;s not a rocket science.</p>

<p><b>PHOTOSHOP</b></p>

<p>More advanced tool and not cheap but most companies have it so you can still sit with graphic and look how he/she do some stuff or ask him/her how to use some basic functions. e.g: most design are done in photoshop so instead of getting UI image and some guides why not to ask to get PSD so you can import all directly from PSD to xCode by e.g: simply cmd+c/v hex colors or font names and sizes? less work for designer, and for me it&rsquo;s way more elegant and faster to implement.</p>

<p><b>INTERFACE BUILDER</b></p>

<p>Long time ago there was an argument if it&rsquo;s really useful and safe to use IB but today when we have autolayout ? As George Carlin say&rsquo;s - &ldquo;It&rsquo;s bullshit and it&rsquo;s bad for you&rdquo; and i cannot agree more. User IB as much as possible!. There are now so many COOL features that may dramatically speed up your development and decrease lines of code. And as we know less code - better to maintain, debug and of course less bugs. Some features that can save a lot of our work:</p>

<p><code>IB_DESIGNABLE</code> - new feature that allow you to see a preview of your custom control in IB that&rsquo;s a game changer because it&rsquo;s allow you to see some of your work without even opening app on device or simulator.</p>

<p>Take a look IB without designable:</p>

<p><img class="center" src="/assets/images/no_designable.png" width="800"></p>

<p>And with enabled designable controls preview:</p>

<p><img class="center" src="/assets/images/designable.png" width="800"></p>

<p><code>Interface Builder Preview</code> - super cool feature, and one of the most wanted from the time autolayout was introduced. Simply this allow you to see preview of your app layout on ALL selected devices. Again no need to run app and you can see if there are no glitches in your autolayout UI.</p>

<p><img class="center" src="/assets/images/ib_preview.png" width="800"></p>

<p><code>Assets catalog</code> - Now when we have new iPhones with @3x resolution assets catalog is only place when you can manage all of assets without getting mad. Also it allow you to FINALLY set rendering mode of asset! no more:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">imageView</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">UIImage</span> <span class="nl">imageNamed</span><span class="p">:</span><span class="s">@&quot;myasset&quot;</span><span class="p">]</span> <span class="nl">imageWithRenderingMode</span><span class="p">:</span><span class="n">UIImageRenderingModeAlwaysTemplate</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure>


<p>Also allow you to manage <code>Size Classes</code> And here how it looks:</p>

<p><img class="center" src="/assets/images/image_assets.png" width="800"></p>

<p>Those are one of most used things that will save your day many times. There is of course a lot more but it&rsquo;s time to get to our main topic which is:</p>

<p><b>ANIMATIONS</b></p>

<p>Without them your app will be at least average if you really want to make your app look epic put as much animations as you can, your app need to live otherwise it will die in all those apps that spam appstore day by day</p>

<p><img class="center" src="/assets/images/deal_with_it.gif" width="800"></p>

<p>But before we start, you need to learn how to &ldquo;see&rdquo; animations in your app. I&rsquo;m always doing sketches so I can visualize how may app will behave like this one:</p>

<p><img class="center" src="/assets/images/sketch_app.jpg" width="800"></p>

<p>If you are lucky and you have designer he can always do it for you or even make some animation using AfterEffects and export to gif or some video. It&rsquo;s always a good thing to have something like this so you will not lose the &ldquo;idea&rdquo; of animation. Ok enough of talking time for some code!</p>

<p>First let&rsquo;s talk how I did this idle spinner animation when app is not used. I saw this kind of loading spinner in some games and I decided to do the same here so app give that feeling of &ldquo;doing something&rdquo; while not used. So first I put some multiple <code>UIView</code> in my container as the each one of them will be animated using simple rotation of it&rsquo;s center</p>

<p>Drawing:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">drawRect:</span><span class="p">(</span><span class="bp">CGRect</span><span class="p">)</span><span class="nv">rect</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">//get current context</span>
</span><span class='line'>    <span class="n">CGContextRef</span> <span class="n">context</span> <span class="o">=</span> <span class="n">UIGraphicsGetCurrentContext</span><span class="p">();</span>
</span><span class='line'>  
</span><span class='line'>  <span class="c1">//this code moves our circle along view bounds if you decide not to center it.</span>
</span><span class='line'>    <span class="n">CGContextSaveGState</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>
</span><span class='line'>    <span class="n">CGContextTranslateCTM</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="nb">self</span><span class="p">.</span><span class="n">offsetX</span><span class="p">,</span> <span class="nb">self</span><span class="p">.</span><span class="n">offsetY</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">//now create a path that will be used for drawing</span>
</span><span class='line'>    <span class="n">CGMutablePathRef</span> <span class="n">arc</span> <span class="o">=</span> <span class="n">CGPathCreateMutable</span><span class="p">();</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">//this function retuns path representing arc (piece of pie)</span>
</span><span class='line'>    <span class="n">CGPathAddArc</span><span class="p">(</span><span class="n">arc</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span>
</span><span class='line'>                 <span class="n">rect</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span> <span class="o">*</span> <span class="mf">0.5f</span><span class="p">,</span> <span class="n">rect</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span> <span class="o">*</span> <span class="mf">0.5f</span><span class="p">,</span>
</span><span class='line'>                 <span class="nb">self</span><span class="p">.</span><span class="n">radius</span><span class="p">,</span>
</span><span class='line'>                 <span class="n">degreeToRadian</span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">startAngle</span><span class="p">),</span> <span class="c1">//see we conver deegree to radians here by deg*M_PI/180.0</span>
</span><span class='line'>                 <span class="n">degreeToRadian</span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">endAngle</span><span class="p">),</span>
</span><span class='line'>                 <span class="nb">YES</span><span class="p">);</span> <span class="c1">//clock wise</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">//now we need to stroke our arc </span>
</span><span class='line'>    <span class="n">CGPathRef</span> <span class="n">strokedArc</span> <span class="o">=</span>
</span><span class='line'>    <span class="n">CGPathCreateCopyByStrokingPath</span><span class="p">(</span><span class="n">arc</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span>
</span><span class='line'>                                   <span class="nb">self</span><span class="p">.</span><span class="n">lineWidth</span><span class="p">,</span>
</span><span class='line'>                                   <span class="n">kCGLineCapButt</span><span class="p">,</span>
</span><span class='line'>                                   <span class="n">kCGLineJoinMiter</span><span class="p">,</span>
</span><span class='line'>                                   <span class="mf">10.0f</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">//apply path for drawing</span>
</span><span class='line'>    <span class="n">CGContextAddPath</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">strokedArc</span><span class="p">);</span>
</span><span class='line'>    <span class="c1">//setup colors</span>
</span><span class='line'>    <span class="n">CGContextSetFillColorWithColor</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="nb">self</span><span class="p">.</span><span class="n">fillColor</span><span class="p">.</span><span class="bp">CGColor</span><span class="p">);</span>
</span><span class='line'>    <span class="n">CGContextSetStrokeColorWithColor</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="nb">self</span><span class="p">.</span><span class="n">strokeColor</span><span class="p">.</span><span class="bp">CGColor</span><span class="p">);</span>
</span><span class='line'>    <span class="c1">//and draw</span>
</span><span class='line'>    <span class="n">CGContextDrawPath</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">kCGPathFillStroke</span><span class="p">);</span>
</span><span class='line'>    <span class="n">CGContextRestoreGState</span><span class="p">(</span><span class="n">context</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>This will give us nicely done arcs in our IB of course we are declaring our view as:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="p">@</span><span class="n">import</span> <span class="n">UIKit</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="n">IB_DESIGNABLE</span>
</span><span class='line'>
</span><span class='line'><span class="k">@interface</span> <span class="nc">ADVArcRotationView</span> : <span class="bp">UIView</span>
</span><span class='line'>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">)</span> <span class="n">IBInspectable</span> <span class="n">CGFloat</span> <span class="n">offsetX</span><span class="p">;</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">)</span> <span class="n">IBInspectable</span> <span class="n">CGFloat</span> <span class="n">offsetY</span><span class="p">;</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">)</span> <span class="n">IBInspectable</span> <span class="n">CGFloat</span> <span class="n">radius</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">)</span> <span class="n">IBInspectable</span> <span class="bp">UIColor</span> <span class="o">*</span><span class="n">fillColor</span><span class="p">;</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">)</span> <span class="n">IBInspectable</span> <span class="bp">UIColor</span> <span class="o">*</span><span class="n">strokeColor</span><span class="p">;</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">)</span> <span class="n">IBInspectable</span> <span class="n">CGFloat</span> <span class="n">lineWidth</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">)</span> <span class="n">IBInspectable</span> <span class="n">CGFloat</span> <span class="n">startAngle</span><span class="p">;</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">)</span> <span class="n">IBInspectable</span> <span class="n">CGFloat</span> <span class="n">endAngle</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>


<p>So we can see live preview in Interface builder, see <code>IBInspectable</code> ? this allow you to declare variables available from interface builder so you can modify it look without compiling.</p>

<p>Ok so how to animate the views ? there are actually two ways of doing that one by using <code>UIView animateWithDuration</code> or <code>CABasicAnimation</code> from Core Animation. I want to focus today mostly on Core Animation so i will show some simple UIView animations later on, but for now a bit about Core Animation. It&rsquo;s one of the low level frameworks provided by Apple allowing to create animations that can be apply directly on views layers, notice that we are not working on UIView anymore we are going deeper by playing with UIView layer property. <code>CALayer</code> is a lightweight entity used to acutally do drawing for you under the hood. Layer can have sublayers so it’s pretty similar to working with views. The main difference is that you can do some animated drawing which can&rsquo;t be achieved by using UIView  <code>drawRect:</code> method. You can even create your own fully custom layers. Of course there is some magic going under the hood for you. If you read documentation you will notice there is something called presentationLayer this guy hold current view state while animating and this may be useful in some cases. This is also a good moment to tell why iOS works so damn fast, and why doing this kind of animations on Android make some of developers working on it commit suicide; the answer is simple:</p>

<p><b>iOS perform hardware accelerated animations</b> - what does this mean? iOS rendering pipeline is based on OpenGL and its directly connected to whole API (right now they probably doing some Metal SDK transitions to speed up even more some stuff) That&rsquo;s why every thing animated in iOS works so smooth.</p>

<p>Ok time to explain how do we actually animate idle arcs:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="c1">//collect views from IB using collections</span>
</span><span class='line'>
</span><span class='line'><span class="k">@interface</span> <span class="nc">ADVIdleViewController</span> <span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="k">strong</span><span class="p">,</span> <span class="k">nonatomic</span><span class="p">)</span> <span class="n">IBOutletCollection</span><span class="p">(</span><span class="n">ADVArcRotationView</span><span class="p">)</span> <span class="bp">NSArray</span> <span class="o">*</span><span class="n">arcViews</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">@end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Creating rotation animation:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="p">-(</span><span class="bp">CAKeyframeAnimation</span> <span class="o">*</span><span class="p">)</span><span class="nf">generateLayerAnimationWithDuration:</span><span class="p">(</span><span class="n">CGFloat</span><span class="p">)</span><span class="nv">duration</span>
</span><span class='line'>                                                   <span class="nf">reverse:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">reverse</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="c1">//create animation that will modify &quot;transform&quot; property of layer iOS allow to use some build in keywords</span>
</span><span class='line'>  <span class="c1">//like &quot;rotation&quot; or &quot;scale&quot; to build for us whole functions that will interpolate values.</span>
</span><span class='line'>
</span><span class='line'>    <span class="bp">CAKeyframeAnimation</span> <span class="o">*</span><span class="n">rotationAnimation</span> <span class="o">=</span> <span class="p">[</span><span class="bp">CAKeyframeAnimation</span> <span class="nl">animationWithKeyPath</span><span class="p">:</span><span class="s">@&quot;transform.rotation&quot;</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="bp">NSArray</span> <span class="o">*</span><span class="n">rotationValues</span> <span class="o">=</span> <span class="n">reverse</span> <span class="o">?</span> <span class="l">@[@(</span><span class="mf">2.0f</span> <span class="o">*</span> <span class="n">M_PI</span><span class="l">)</span><span class="p">,</span> <span class="mf">@0.0f</span><span class="l">]</span> <span class="o">:</span> <span class="l">@[</span><span class="mf">@0.0f</span><span class="p">,</span> <span class="l">@(</span><span class="mf">2.0f</span> <span class="o">*</span> <span class="n">M_PI</span><span class="l">)]</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">[</span><span class="n">rotationAnimation</span> <span class="nl">setValues</span><span class="p">:</span><span class="n">rotationValues</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">rotationAnimation</span><span class="p">.</span><span class="n">repeatCount</span> <span class="o">=</span> <span class="n">arc4random</span><span class="p">()</span> <span class="o">%</span> <span class="n">kADVMaximumAnimationRepeatCount</span><span class="p">;</span>
</span><span class='line'>    <span class="c1">//by default animation is removed from layer after finish but we want actually want to keep it so we can find it later.</span>
</span><span class='line'>    <span class="n">rotationAnimation</span><span class="p">.</span><span class="n">removedOnCompletion</span> <span class="o">=</span> <span class="nb">NO</span><span class="p">;</span>
</span><span class='line'>    <span class="n">rotationAnimation</span><span class="p">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">duration</span><span class="p">;</span>
</span><span class='line'>    <span class="n">rotationAnimation</span><span class="p">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="nb">self</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">rotationAnimation</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Applying animation to particular view layer:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setupArcsRoationAnimationsd</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="bp">NSUInteger</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="nb">self</span><span class="p">.</span><span class="n">arcViews</span><span class="p">.</span><span class="n">count</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">UIView</span> <span class="o">*</span><span class="n">v</span> <span class="o">=</span> <span class="nb">self</span><span class="p">.</span><span class="n">arcViews</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">CAKeyframeAnimation</span> <span class="o">*</span><span class="n">anim</span> <span class="o">=</span> <span class="p">[</span><span class="nb">self</span> <span class="nl">generateLayerAnimationWithDuration</span><span class="p">:</span> <span class="p">(</span><span class="n">arc4random</span><span class="p">()</span> <span class="o">%</span> <span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="n">kADVMinimumAnimationDuration</span>
</span><span class='line'>                                                                     <span class="nl">reverse</span><span class="p">:</span> <span class="p">((</span><span class="n">i</span> <span class="o">==</span> <span class="mi">3</span> <span class="o">||</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">5</span><span class="p">))];</span>
</span><span class='line'>
</span><span class='line'>        <span class="p">[</span><span class="n">v</span><span class="p">.</span><span class="n">layer</span> <span class="nl">addAnimation</span><span class="p">:</span><span class="n">anim</span>
</span><span class='line'>                       <span class="nl">forKey</span><span class="p">:</span><span class="n">kADVAnimationKey</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ok now because we set us as delegate to animation we have to handle it in this function:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="c1">//get notified that animations is finished</span>
</span><span class='line'><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">animationDidStop:</span><span class="p">(</span><span class="bp">CAAnimation</span> <span class="o">*</span><span class="p">)</span><span class="nv">anim</span>
</span><span class='line'>                <span class="nf">finished:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">flag</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">//loop by all views that are attached</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="bp">UIView</span> <span class="o">*</span><span class="n">v</span> <span class="k">in</span> <span class="nb">self</span><span class="p">.</span><span class="n">arcViews</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>      <span class="c1">//and get animation for this view layer</span>
</span><span class='line'>        <span class="bp">CAAnimation</span> <span class="o">*</span><span class="n">current</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="p">.</span><span class="n">layer</span> <span class="nl">animationForKey</span><span class="p">:</span><span class="n">kADVAnimationKey</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">//check if the animation that just complete is the one of the view we are looking for</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">current</span> <span class="o">==</span> <span class="n">anim</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>            <span class="c1">//if so now we can remove it </span>
</span><span class='line'>            <span class="p">[</span><span class="n">v</span><span class="p">.</span><span class="n">layer</span> <span class="nl">removeAnimationForKey</span><span class="p">:</span><span class="n">kADVAnimationKey</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>            <span class="c1">//and setup new one so the whole view will endlessly animates</span>
</span><span class='line'>            <span class="bp">CAKeyframeAnimation</span> <span class="o">*</span><span class="n">anim</span> <span class="o">=</span> <span class="p">[</span><span class="nb">self</span> <span class="nl">generateLayerAnimationWithDuration</span><span class="p">:</span> <span class="p">(</span><span class="n">arc4random</span><span class="p">()</span> <span class="o">%</span> <span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="n">kADVMinimumAnimationDuration</span>
</span><span class='line'>                                                                         <span class="nl">reverse</span><span class="p">:</span> <span class="p">(</span><span class="n">arc4random</span><span class="p">()</span> <span class="o">%</span> <span class="mi">2</span><span class="p">)</span> <span class="p">];</span>
</span><span class='line'>
</span><span class='line'>            <span class="p">[</span><span class="n">v</span><span class="p">.</span><span class="n">layer</span> <span class="nl">addAnimation</span><span class="p">:</span><span class="n">anim</span>
</span><span class='line'>                           <span class="nl">forKey</span><span class="p">:</span><span class="n">kADVAnimationKey</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>            <span class="k">break</span><span class="p">;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>For example you can also use regular UIView animation that&rsquo;s how I manage to do this magic echo impulse ring that blinks all the time:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="c1">//get view from IB</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="k">weak</span><span class="p">,</span> <span class="k">nonatomic</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="n">ADVArcRotationView</span> <span class="o">*</span><span class="n">impulseView</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//animate using regular UIView animation</span>
</span><span class='line'>
</span><span class='line'><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">setupImpulseViewAnimation</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>  <span class="c1">//break retain cycle, and safeguard for view release</span>
</span><span class='line'>    <span class="k">__weak</span> <span class="n">__typeof__</span><span class="p">(</span><span class="nb">self</span><span class="p">)</span> <span class="n">weakSelf</span> <span class="o">=</span> <span class="nb">self</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">//initial setup hiden super small view</span>
</span><span class='line'>    <span class="nb">self</span><span class="p">.</span><span class="n">impulseView</span><span class="p">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>
</span><span class='line'>    <span class="nb">self</span><span class="p">.</span><span class="n">impulseView</span><span class="p">.</span><span class="n">transform</span> <span class="o">=</span> <span class="n">CGAffineTransformMakeScale</span><span class="p">(</span><span class="mf">0.0001</span><span class="p">,</span> <span class="mf">0.0001</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">//firts part</span>
</span><span class='line'>    <span class="p">[</span><span class="bp">UIView</span> <span class="nl">animateWithDuration</span><span class="p">:</span><span class="mf">0.7</span>
</span><span class='line'>                          <span class="nl">delay</span><span class="p">:</span><span class="mf">0.0</span>
</span><span class='line'>                        <span class="nl">options</span><span class="p">:</span><span class="n">UIViewAnimationOptionCurveLinear</span>
</span><span class='line'>                     <span class="nl">animations</span><span class="p">:</span><span class="o">^</span><span class="p">{</span>
</span><span class='line'>
</span><span class='line'>                         <span class="c1">//scale it to 80% of size and at this time make it visible </span>
</span><span class='line'>                         <span class="n">weakSelf</span><span class="p">.</span><span class="n">impulseView</span><span class="p">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">;</span>
</span><span class='line'>                         <span class="n">weakSelf</span><span class="p">.</span><span class="n">impulseView</span><span class="p">.</span><span class="n">transform</span> <span class="o">=</span> <span class="n">CGAffineTransformMakeScale</span><span class="p">(</span><span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>                     <span class="p">}</span> <span class="nl">completion</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="kt">BOOL</span> <span class="n">finished</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>                         <span class="c1">//second part</span>
</span><span class='line'>                         <span class="p">[</span><span class="bp">UIView</span> <span class="nl">animateWithDuration</span><span class="p">:</span><span class="mf">0.3</span>
</span><span class='line'>                                               <span class="nl">delay</span><span class="p">:</span><span class="mf">0.0</span>
</span><span class='line'>                                             <span class="nl">options</span><span class="p">:</span><span class="n">UIViewAnimationOptionCurveLinear</span>
</span><span class='line'>                                          <span class="nl">animations</span><span class="p">:</span><span class="o">^</span><span class="p">{</span>
</span><span class='line'>
</span><span class='line'>                                              <span class="c1">//by the rest time fade it out again and scale to 100% of size</span>
</span><span class='line'>                                              <span class="n">weakSelf</span><span class="p">.</span><span class="n">impulseView</span><span class="p">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.0f</span><span class="p">;</span>
</span><span class='line'>                                              <span class="n">weakSelf</span><span class="p">.</span><span class="n">impulseView</span><span class="p">.</span><span class="n">transform</span> <span class="o">=</span> <span class="n">CGAffineTransformMakeScale</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>                                          <span class="p">}</span> <span class="nl">completion</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="kt">BOOL</span> <span class="n">finished</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>                                              <span class="c1">//recursive animation calling itself</span>
</span><span class='line'>                                              <span class="p">[</span><span class="n">weakSelf</span> <span class="n">setupImpulseViewAnimation</span><span class="p">];</span>
</span><span class='line'>                                          <span class="p">}];</span>
</span><span class='line'>                     <span class="p">}];</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Doing heartbeat animation is also very simple again we will use <code>CABasicAnimation</code> and the <code>autoreverses</code> property of animation. This will simply reverse animation to its original state automatically.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">applyHeartBeatAnimation:</span><span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nv">apply</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">apply</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">layer</span> <span class="nl">removeAnimationForKey</span><span class="p">:</span><span class="n">kADVHeartBeatAnimationKey</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">return</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="bp">CABasicAnimation</span> <span class="o">*</span><span class="n">heartBeatAnimation</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">heartBeatAnimation</span> <span class="o">=</span> <span class="p">[</span><span class="bp">CABasicAnimation</span> <span class="nl">animationWithKeyPath</span><span class="p">:</span><span class="s">@&quot;transform.scale&quot;</span><span class="p">];</span>
</span><span class='line'>    <span class="n">heartBeatAnimation</span><span class="p">.</span><span class="n">duration</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>
</span><span class='line'>    <span class="n">heartBeatAnimation</span><span class="p">.</span><span class="n">repeatCount</span> <span class="o">=</span> <span class="n">INFINITY</span><span class="p">;</span>
</span><span class='line'>    <span class="n">heartBeatAnimation</span><span class="p">.</span><span class="n">autoreverses</span> <span class="o">=</span> <span class="nb">YES</span><span class="p">;</span>
</span><span class='line'>    <span class="n">heartBeatAnimation</span><span class="p">.</span><span class="n">fromValue</span> <span class="o">=</span> <span class="mf">@1.0f</span><span class="p">;</span>
</span><span class='line'>    <span class="n">heartBeatAnimation</span><span class="p">.</span><span class="n">toValue</span> <span class="o">=</span> <span class="mf">@1.15f</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">layer</span> <span class="nl">addAnimation</span><span class="p">:</span><span class="n">heartBeatAnimation</span>
</span><span class='line'>                      <span class="nl">forKey</span><span class="p">:</span><span class="n">kADVHeartBeatAnimationKey</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>When it comes to simple animations that gives wow effect, the one of the most important places in your app is it&rsquo;s menu.
If you build cool and fancy menu users will way more gladly use it even without doing anything just to play with it.</p>

<p>My menu uses new iOS7 feature: animation with spring to be more precise:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="p">+</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">animateWithDuration:</span><span class="p">(</span><span class="n">NSTimeInterval</span><span class="p">)</span><span class="nv">duration</span>
</span><span class='line'>                      <span class="nf">delay:</span><span class="p">(</span><span class="n">NSTimeInterval</span><span class="p">)</span><span class="nv">delay</span>
</span><span class='line'>     <span class="nf">usingSpringWithDamping:</span><span class="p">(</span><span class="n">CGFloat</span><span class="p">)</span><span class="nv">dampingRatio</span>
</span><span class='line'>      <span class="nf">initialSpringVelocity:</span><span class="p">(</span><span class="n">CGFloat</span><span class="p">)</span><span class="nv">velocity</span>
</span><span class='line'>                    <span class="nf">options:</span><span class="p">(</span><span class="n">UIViewAnimationOptions</span><span class="p">)</span><span class="nv">options</span>
</span><span class='line'>                 <span class="nf">animations:</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="kt">void</span><span class="p">))</span><span class="nv">animations</span>
</span><span class='line'>                 <span class="nf">completion:</span><span class="p">(</span><span class="kt">void</span> <span class="p">(</span><span class="o">^</span><span class="p">)(</span><span class="kt">BOOL</span> <span class="n">finished</span><span class="p">))</span><span class="nv">completion</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>This animations apply spring effect to your animation which in many cases looks super fancy and cool and you can combine this with any other animation it&rsquo;s just something you get for free so why not to use it? the code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">openActionMenu</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="c1">//reset buttons positions</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="bp">UIButton</span> <span class="o">*</span><span class="n">btn</span> <span class="k">in</span> <span class="nb">self</span><span class="p">.</span><span class="n">menuButtons</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">btn</span><span class="p">.</span><span class="n">center</span> <span class="o">=</span> <span class="nb">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">center</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">//if you need proper order of objects from IB and you use OutletCollections which do not guarantee proper order</span>
</span><span class='line'>    <span class="c1">//you may consider of sorting them somehow in this case i simply use tag propety of view to get order i want.</span>
</span><span class='line'>
</span><span class='line'>    <span class="bp">NSSortDescriptor</span> <span class="o">*</span><span class="n">sortDesc</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSSortDescriptor</span> <span class="nl">sortDescriptorWithKey</span><span class="p">:</span><span class="s">@&quot;tag&quot;</span>
</span><span class='line'>                                                               <span class="nl">ascending</span><span class="p">:</span><span class="nb">YES</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="bp">NSArray</span> <span class="o">*</span><span class="n">sortedButtons</span> <span class="o">=</span> <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">menuButtons</span> <span class="nl">sortedArrayUsingDescriptors</span><span class="p">:</span><span class="l">@[</span><span class="n">sortDesc</span><span class="l">]</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">CGFloat</span> <span class="n">delay</span> <span class="o">=</span> <span class="mf">0.1f</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">//desired buttons location along center</span>
</span><span class='line'>    <span class="bp">NSArray</span> <span class="o">*</span><span class="n">constraintValues</span> <span class="o">=</span> <span class="l">@[</span> <span class="l">@[</span><span class="mi">@0</span><span class="p">,</span> <span class="mi">@0</span><span class="l">]</span><span class="p">,</span>
</span><span class='line'>                                   <span class="l">@[</span><span class="mi">@0</span><span class="p">,</span> <span class="mi">@120</span><span class="l">]</span><span class="p">,</span>
</span><span class='line'>                                   <span class="l">@[@(</span><span class="o">-</span><span class="mi">110</span><span class="l">)</span><span class="p">,</span> <span class="mi">@50</span><span class="l">]</span><span class="p">,</span>
</span><span class='line'>                                   <span class="l">@[@(</span><span class="o">-</span><span class="mi">80</span><span class="l">)</span><span class="p">,</span> <span class="l">@(</span><span class="o">-</span><span class="mi">90</span><span class="l">)]</span><span class="p">,</span>
</span><span class='line'>                                   <span class="l">@[</span><span class="mi">@80</span><span class="p">,</span> <span class="l">@(</span><span class="o">-</span><span class="mi">90</span><span class="l">)]</span><span class="p">,</span>
</span><span class='line'>                                   <span class="l">@[</span><span class="mi">@110</span><span class="p">,</span> <span class="mi">@50</span><span class="l">]]</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="bp">NSUInteger</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">sortedButtons</span><span class="p">.</span><span class="n">count</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="bp">UIButton</span> <span class="o">*</span><span class="n">btn</span> <span class="o">=</span> <span class="n">sortedButtons</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span class='line'>        <span class="bp">NSArray</span> <span class="o">*</span><span class="n">values</span> <span class="o">=</span> <span class="n">constraintValues</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">//go button by button and animate alpha so they become visible in 1/4 time of animation</span>
</span><span class='line'>        <span class="p">[</span><span class="bp">UIView</span> <span class="nl">animateWithDuration</span><span class="p">:</span><span class="mf">0.2</span>
</span><span class='line'>                              <span class="nl">delay</span><span class="p">:</span><span class="n">delay</span>
</span><span class='line'>                            <span class="nl">options</span><span class="p">:</span><span class="n">UIViewAnimationOptionAllowUserInteraction</span>
</span><span class='line'>                         <span class="nl">animations</span><span class="p">:</span><span class="o">^</span><span class="p">{</span>
</span><span class='line'>
</span><span class='line'>                             <span class="n">btn</span><span class="p">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="mf">1.0f</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>                         <span class="p">}</span> <span class="nl">completion</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="kt">BOOL</span> <span class="n">finished</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>                         <span class="p">}];</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">//notice we can combine multiple animations to one view as long as they touch different properites</span>
</span><span class='line'>        <span class="p">[</span><span class="bp">UIView</span> <span class="nl">animateWithDuration</span><span class="p">:</span><span class="mf">0.8</span>
</span><span class='line'>                              <span class="nl">delay</span><span class="p">:</span><span class="n">delay</span>
</span><span class='line'>             <span class="nl">usingSpringWithDamping</span><span class="p">:</span><span class="mf">0.2</span>
</span><span class='line'>              <span class="nl">initialSpringVelocity</span><span class="p">:</span><span class="mf">0.05</span>
</span><span class='line'>                            <span class="nl">options</span><span class="p">:</span><span class="n">UIViewAnimationOptionBeginFromCurrentState</span>
</span><span class='line'>                         <span class="nl">animations</span><span class="p">:</span><span class="o">^</span><span class="p">{</span>
</span><span class='line'>
</span><span class='line'>                             <span class="c1">//apply new position</span>
</span><span class='line'>                             <span class="bp">CGPoint</span> <span class="n">newCenter</span> <span class="o">=</span> <span class="n">btn</span><span class="p">.</span><span class="n">center</span><span class="p">;</span>
</span><span class='line'>                             <span class="n">newCenter</span><span class="p">.</span><span class="n">x</span> <span class="o">+=</span> <span class="p">[</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="n">floatValue</span><span class="p">];</span>
</span><span class='line'>                             <span class="n">newCenter</span><span class="p">.</span><span class="n">y</span> <span class="o">+=</span> <span class="p">[</span><span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="n">floatValue</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>                             <span class="n">btn</span><span class="p">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">newCenter</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>                         <span class="p">}</span> <span class="nl">completion</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="kt">BOOL</span> <span class="n">finished</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>                         <span class="p">}];</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">delay</span> <span class="o">+=</span> <span class="mf">0.1</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ok we are done with those easy ones now time for some tricky animations. We left two of them, the hole animation that make record button empty inside and arc animation that represent record time animation. (e.g: we get user desired time of recording and he need to fit this time before it run out.)</p>

<p>Each <code>CALayer</code> contains mask property which tells him what could be actually visible. So simply whatever shape you will apply on your layer using this mask will become transparent. In our case we actually need the opposite we want to tell our view what we want to keep not what we want to cut.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="c1">//mask whole view so at this point it will be fully transparent</span>
</span><span class='line'><span class="bp">UIBezierPath</span> <span class="o">*</span><span class="n">basePath</span> <span class="o">=</span> <span class="p">[</span><span class="bp">UIBezierPath</span> <span class="nl">bezierPathWithRect</span><span class="p">:</span><span class="n">realBounds</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//now prepare path that contain circle as a mask</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//empty mask path</span>
</span><span class='line'><span class="bp">UIBezierPath</span> <span class="o">*</span><span class="n">startPath</span> <span class="o">=</span> <span class="p">[</span><span class="bp">UIBezierPath</span> <span class="nl">bezierPathWithOvalInRect</span><span class="p">:</span><span class="n">CGRectMake</span><span class="p">(</span><span class="n">viewSize</span><span class="o">*</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">viewSize</span><span class="o">*</span><span class="mf">0.5</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)];</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//mask path that contains circle with 20px on each edge</span>
</span><span class='line'><span class="bp">UIBezierPath</span> <span class="o">*</span><span class="n">endPath</span> <span class="o">=</span> <span class="p">[</span><span class="bp">UIBezierPath</span> <span class="nl">bezierPathWithOvalInRect</span><span class="p">:</span><span class="n">CGRectMake</span><span class="p">(</span><span class="n">edgeSize</span><span class="p">,</span> <span class="n">edgeSize</span><span class="p">,</span> <span class="n">viewSize</span><span class="o">-</span><span class="n">edgeSize</span><span class="o">*</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">viewSize</span><span class="o">-</span><span class="n">edgeSize</span><span class="o">*</span><span class="mf">2.0</span><span class="p">)];</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//do outer join by applying we are cutting a hole in the original path</span>
</span><span class='line'><span class="p">[</span><span class="n">startPath</span> <span class="nl">appendPath</span><span class="p">:</span><span class="n">basePath</span><span class="p">];</span>
</span><span class='line'><span class="p">[</span><span class="n">endPath</span> <span class="nl">appendPath</span><span class="p">:</span><span class="n">basePath</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//now prepare our mask layer </span>
</span><span class='line'><span class="bp">CAShapeLayer</span> <span class="o">*</span><span class="n">maskLayer</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">CAShapeLayer</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</span><span class='line'><span class="c1">//set it size to whole view </span>
</span><span class='line'><span class="n">maskLayer</span><span class="p">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">realBounds</span><span class="p">;</span>
</span><span class='line'><span class="n">maskLayer</span><span class="p">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">endPath</span><span class="p">.</span><span class="bp">CGPath</span><span class="p">;</span> <span class="c1">// set fully visible path </span>
</span><span class='line'><span class="n">maskLayer</span><span class="p">.</span><span class="n">fillRule</span> <span class="o">=</span> <span class="n">kCAFillRuleEvenOdd</span><span class="p">;</span> <span class="c1">// this is the key to enable diff cut in both paths shapes</span>
</span><span class='line'><span class="n">maskLayer</span><span class="p">.</span><span class="n">fillColor</span> <span class="o">=</span> <span class="p">[</span><span class="bp">UIColor</span> <span class="n">blackColor</span><span class="p">].</span><span class="bp">CGColor</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="c1">//apply mask to layer</span>
</span><span class='line'><span class="nb">self</span><span class="p">.</span><span class="n">layer</span><span class="p">.</span><span class="n">mask</span> <span class="o">=</span> <span class="n">maskLayer</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>And because it is also a regular <code>CALayer</code> you can apply animation to it.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="bp">CABasicAnimation</span> <span class="o">*</span><span class="n">maskAnimation</span> <span class="o">=</span> <span class="p">[</span><span class="bp">CABasicAnimation</span> <span class="nl">animationWithKeyPath</span><span class="p">:</span><span class="n">kADVMaskAnimationKey</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'><span class="n">maskAnimation</span><span class="p">.</span><span class="n">fromValue</span> <span class="o">=</span> <span class="n">startPath</span><span class="p">.</span><span class="bp">CGPath</span><span class="p">;</span>
</span><span class='line'><span class="n">maskAnimation</span><span class="p">.</span><span class="n">toValue</span> <span class="o">=</span> <span class="n">endPath</span><span class="p">.</span><span class="bp">CGPath</span><span class="p">;</span>
</span><span class='line'><span class="n">maskAnimation</span><span class="p">.</span><span class="n">duration</span> <span class="o">=</span> <span class="n">animationDuration</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="p">[</span><span class="n">maskLayer</span> <span class="nl">addAnimation</span><span class="p">:</span><span class="n">maskAnimation</span> <span class="nl">forKey</span><span class="p">:</span><span class="n">kADVMaskAnimationKey</span><span class="p">];</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<p>One more thing, remember that animation apply changes to layer only while animating! if you for example set your layer scale to 0.5 and animate from 0.5 to 1.0 it will go back to 0.5 after animation so your layer need to set proper final value before animating. It&rsquo;s super important so keep this in mind.</p>

<p><b>Custom CALayer</b></p>

<p>My Pie Chart animation inside drilled button is done using custom build <code>CALayer</code> i had to do it because regular <code>CALayer</code> do not allow to animate Bezier path simply, it will interpolate value instead of redrawing it properly. You can find some detailed info about how it is done on <a href="http://blog.pixelingene.com/2012/02/animating-pie-slices-using-a-custom-calayer/">Pixel-in-Gene Blog</a> but the basic idea is to subclass <code>CALayer</code> and overwrite <code>-(void)drawInContext:(CGContextRef)ctx</code> which is called every time property changes. Here is detailed custom pie chart implementation:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">drawInContext:</span><span class="p">(</span><span class="n">CGContextRef</span><span class="p">)</span><span class="nv">ctx</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="bp">CGPoint</span> <span class="n">center</span> <span class="o">=</span> <span class="n">CGPointMake</span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">bounds</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="o">*</span><span class="mf">0.5</span><span class="p">,</span> <span class="nb">self</span><span class="p">.</span><span class="n">bounds</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="o">*</span><span class="mf">0.5</span><span class="p">);</span>
</span><span class='line'>    <span class="n">CGFloat</span> <span class="n">radius</span> <span class="o">=</span> <span class="n">fminf</span><span class="p">(</span><span class="n">center</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">center</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
</span><span class='line'>    <span class="n">CGContextBeginPath</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
</span><span class='line'>    <span class="n">CGContextMoveToPoint</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">center</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">center</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
</span><span class='line'>    <span class="bp">CGPoint</span> <span class="n">p1</span> <span class="o">=</span> <span class="n">CGPointMake</span><span class="p">(</span><span class="n">center</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">cosf</span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">startAngle</span><span class="p">),</span> <span class="n">center</span><span class="p">.</span><span class="n">y</span> <span class="o">+</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">sinf</span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">startAngle</span><span class="p">));</span>
</span><span class='line'>    <span class="n">CGContextAddLineToPoint</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">p1</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">p1</span><span class="p">.</span><span class="n">y</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="kt">BOOL</span> <span class="n">clockwise</span> <span class="o">=</span> <span class="nb">self</span><span class="p">.</span><span class="n">startAngle</span> <span class="o">&gt;</span> <span class="nb">self</span><span class="p">.</span><span class="n">endAngle</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">CGContextAddArc</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">center</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="n">center</span><span class="p">.</span><span class="n">y</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="nb">self</span><span class="p">.</span><span class="n">startAngle</span><span class="p">,</span> <span class="nb">self</span><span class="p">.</span><span class="n">endAngle</span><span class="p">,</span> <span class="n">clockwise</span><span class="p">);</span>
</span><span class='line'>    <span class="n">CGContextClosePath</span><span class="p">(</span><span class="n">ctx</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">CGContextSetFillColorWithColor</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="nb">self</span><span class="p">.</span><span class="n">fillColor</span><span class="p">);</span>
</span><span class='line'>    <span class="n">CGContextSetStrokeColorWithColor</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="p">[</span><span class="bp">UIColor</span> <span class="n">clearColor</span><span class="p">].</span><span class="bp">CGColor</span><span class="p">);</span>
</span><span class='line'>    <span class="n">CGContextSetLineWidth</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span><span class='line'>    <span class="n">CGContextDrawPath</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">kCGPathFillStroke</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>As you can see it&rsquo;s similar to regular <code>drawRect:</code> call but in <code>CALayer</code> we need to tell it actually when to redraw. We do this by overwriting <code>+ (BOOL)needsDisplayForKey:(NSString *)key;</code> method in our custom class. This will tell the layer to redraw every time our color or angle changes even when animated.</p>

<p>Another thing that is done here is automatic animation generation for every property we have. To do this simply overwrite <code>- (id<CAAction>)actionForKey:(NSString *)event</code> and compare the event key with our property by using <code>[event isEqualToString:NSStringFromSelector(@selector(propertyToCompare))]</code> and fire up animation if we detect property that we want to animate.</p>

<p>One more thing&hellip; see the <code>@dynamic</code> keyword on properties instead of automatically generated <code>@synthesize</code> we do this because CoreAnimation will create sub values and dynamically update original one while animating the property. Basically if you used CoreData you should be familiar with it, if not the simplest explanation to <code>@dynamic</code> is that by using it we tell compiler that our <b>setter</b> and <b>getter</b> will be generated outside the class and can be dynamically created instead of static compile time code generation in class.</p>

<p>And that&rsquo;s all for today, as always <a href="https://github.com/noxytrux/AdvancedCoreAnimations">source code</a> available on my github. Next time i will use this code to finish this app using <code>Core Audio</code> as another blog topic.</p>
</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-12-26T17:27:15+01:00" pubdate data-updated="true"></time></div>
	<div class="tags">


	<a class='category' href='/blog/categories/core-animation/'>core animation</a>, <a class='category' href='/blog/categories/ios/'>ios</a>, <a class='category' href='/blog/categories/user-interface/'>user interface</a>, <a class='category' href='/blog/categories/ux/'>ux</a>


</div>
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
		
		
		<a class="addthis_button_tweet"></a>
		
		
		
	</div>
	
</div>


</div>
	<footer id="footer" class="inner">Copyright &copy; 2014

    Marcin Pędzimąż

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->






</body>
</html>